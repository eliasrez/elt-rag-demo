{"format_version":"1.2","terraform_version":"1.13.2","variables":{"blob_container_name":{"value":"rawfiles"},"key_vault_name":{"value":"ragdemo-kv-001"},"location":{"value":"eastus2"},"openai_api_key":{"value":""},"resource_group_name":{"value":"rag-demo-rg"},"search_partition_count":{"value":1},"search_replica_count":{"value":1},"search_service_name":{"value":"rag-demo-search-svc"},"search_sku":{"value":"basic"},"storage_account_name":{"value":"ragtfstorageacct001"}},"planned_values":{"outputs":{"cognitive_search_endpoint_hint":{"sensitive":false,"type":"string","value":"https://rag-demo-search-svc.search.windows.net (use portal or az cli to get admin keys)"},"cognitive_search_service_name":{"sensitive":false,"type":"string","value":"rag-demo-search-svc"},"key_vault_id":{"sensitive":false},"resource_group":{"sensitive":false,"type":"string","value":"rag-demo-rg"},"storage_account_name":{"sensitive":false,"type":"string","value":"ragtfstorageacct001"},"storage_container_name":{"sensitive":false,"type":"string","value":"rawfiles"}},"root_module":{"resources":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"eastus2","name":"ragdemo-kv-001","network_acls":[{"bypass":"AzureServices","default_action":"Allow","ip_rules":null,"virtual_network_subnet_ids":null}],"public_network_access_enabled":true,"purge_protection_enabled":false,"resource_group_name":"rag-demo-rg","sku_name":"standard","soft_delete_retention_days":90,"tags":null,"tenant_id":"e81dd097-297b-4876-aa08-b9448df54ee0","timeouts":null},"sensitive_values":{"access_policy":[],"contact":[],"network_acls":[{}]}},{"address":"azurerm_key_vault_secret.openai_key_placeholder","mode":"managed","type":"azurerm_key_vault_secret","name":"openai_key_placeholder","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"content_type":null,"expiration_date":null,"name":"OPENAI-API-KEY","not_before_date":null,"tags":null,"timeouts":null,"value":"PLACEHOLDER_SET_WITH_AZCLI_OR_PORTAL","value_wo":null,"value_wo_version":null},"sensitive_values":{"value":true}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus2","managed_by":null,"name":"rag-demo-rg","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"azurerm_role_assignment.search_blob_reader","mode":"managed","type":"azurerm_role_assignment","name":"search_blob_reader","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"condition":null,"delegated_managed_identity_resource_id":null,"description":null,"role_definition_name":"Storage Blob Data Reader","timeouts":null},"sensitive_values":{}},{"address":"azurerm_search_service.search","mode":"managed","type":"azurerm_search_service","name":"search","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allowed_ips":null,"authentication_failure_mode":null,"customer_managed_key_enforcement_enabled":false,"hosting_mode":"default","identity":[{"identity_ids":null,"type":"SystemAssigned"}],"local_authentication_enabled":true,"location":"eastus2","name":"rag-demo-search-svc","network_rule_bypass_option":"None","partition_count":1,"public_network_access_enabled":true,"replica_count":1,"resource_group_name":"rag-demo-rg","semantic_search_sku":null,"sku":"basic","tags":null,"timeouts":null},"sensitive_values":{"identity":[{}],"primary_key":true,"query_keys":[],"secondary_key":true}},{"address":"azurerm_storage_account.sa","mode":"managed","type":"azurerm_storage_account","name":"sa","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":4,"values":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":null,"azure_files_authentication":[],"cross_tenant_replication_enabled":false,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"dns_endpoint_type":"Standard","edge_zone":null,"https_traffic_only_enabled":true,"identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"local_user_enabled":true,"location":"eastus2","min_tls_version":"TLS1_2","name":"ragtfstorageacct001","nfsv3_enabled":false,"provisioned_billing_model_version":null,"public_network_access_enabled":true,"queue_encryption_key_type":"Service","resource_group_name":"rag-demo-rg","sas_policy":[],"sftp_enabled":false,"shared_access_key_enabled":true,"table_encryption_key_type":"Service","tags":null,"timeouts":null},"sensitive_values":{"azure_files_authentication":[],"blob_properties":[],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[],"primary_access_key":true,"primary_blob_connection_string":true,"primary_connection_string":true,"queue_properties":[],"routing":[],"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_connection_string":true,"share_properties":[],"static_website":[]},"identity_schema_version":0,"identity":{"name":null,"resource_group_name":null,"subscription_id":null}},{"address":"azurerm_storage_container.rawfiles","mode":"managed","type":"azurerm_storage_container","name":"rawfiles","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"container_access_type":"private","encryption_scope_override_enabled":true,"name":"rawfiles","storage_account_name":null,"timeouts":null},"sensitive_values":{"metadata":{}}}]}},"resource_changes":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"eastus2","name":"ragdemo-kv-001","network_acls":[{"bypass":"AzureServices","default_action":"Allow","ip_rules":null,"virtual_network_subnet_ids":null}],"public_network_access_enabled":true,"purge_protection_enabled":false,"resource_group_name":"rag-demo-rg","sku_name":"standard","soft_delete_retention_days":90,"tags":null,"tenant_id":"e81dd097-297b-4876-aa08-b9448df54ee0","timeouts":null},"after_unknown":{"access_policy":true,"contact":true,"enable_rbac_authorization":true,"id":true,"network_acls":[{}],"rbac_authorization_enabled":true,"vault_uri":true},"before_sensitive":false,"after_sensitive":{"access_policy":[],"contact":[],"network_acls":[{}]}}},{"address":"azurerm_key_vault_secret.openai_key_placeholder","mode":"managed","type":"azurerm_key_vault_secret","name":"openai_key_placeholder","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"content_type":null,"expiration_date":null,"name":"OPENAI-API-KEY","not_before_date":null,"tags":null,"timeouts":null,"value":"PLACEHOLDER_SET_WITH_AZCLI_OR_PORTAL","value_wo":null,"value_wo_version":null},"after_unknown":{"id":true,"key_vault_id":true,"resource_id":true,"resource_versionless_id":true,"version":true,"versionless_id":true},"before_sensitive":false,"after_sensitive":{"value":true}}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus2","managed_by":null,"name":"rag-demo-rg","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_role_assignment.search_blob_reader","mode":"managed","type":"azurerm_role_assignment","name":"search_blob_reader","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"condition":null,"delegated_managed_identity_resource_id":null,"description":null,"role_definition_name":"Storage Blob Data Reader","timeouts":null},"after_unknown":{"condition_version":true,"id":true,"name":true,"principal_id":true,"principal_type":true,"role_definition_id":true,"scope":true,"skip_service_principal_aad_check":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_search_service.search","mode":"managed","type":"azurerm_search_service","name":"search","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allowed_ips":null,"authentication_failure_mode":null,"customer_managed_key_enforcement_enabled":false,"hosting_mode":"default","identity":[{"identity_ids":null,"type":"SystemAssigned"}],"local_authentication_enabled":true,"location":"eastus2","name":"rag-demo-search-svc","network_rule_bypass_option":"None","partition_count":1,"public_network_access_enabled":true,"replica_count":1,"resource_group_name":"rag-demo-rg","semantic_search_sku":null,"sku":"basic","tags":null,"timeouts":null},"after_unknown":{"customer_managed_key_encryption_compliance_status":true,"id":true,"identity":[{"principal_id":true,"tenant_id":true}],"primary_key":true,"query_keys":true,"secondary_key":true},"before_sensitive":false,"after_sensitive":{"identity":[{}],"primary_key":true,"query_keys":[],"secondary_key":true}}},{"address":"azurerm_storage_account.sa","mode":"managed","type":"azurerm_storage_account","name":"sa","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":null,"azure_files_authentication":[],"cross_tenant_replication_enabled":false,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"dns_endpoint_type":"Standard","edge_zone":null,"https_traffic_only_enabled":true,"identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"local_user_enabled":true,"location":"eastus2","min_tls_version":"TLS1_2","name":"ragtfstorageacct001","nfsv3_enabled":false,"provisioned_billing_model_version":null,"public_network_access_enabled":true,"queue_encryption_key_type":"Service","resource_group_name":"rag-demo-rg","sas_policy":[],"sftp_enabled":false,"shared_access_key_enabled":true,"table_encryption_key_type":"Service","tags":null,"timeouts":null},"after_unknown":{"access_tier":true,"azure_files_authentication":[],"blob_properties":true,"custom_domain":[],"customer_managed_key":[],"id":true,"identity":[],"immutability_policy":[],"large_file_share_enabled":true,"network_rules":true,"primary_access_key":true,"primary_blob_connection_string":true,"primary_blob_endpoint":true,"primary_blob_host":true,"primary_blob_internet_endpoint":true,"primary_blob_internet_host":true,"primary_blob_microsoft_endpoint":true,"primary_blob_microsoft_host":true,"primary_connection_string":true,"primary_dfs_endpoint":true,"primary_dfs_host":true,"primary_dfs_internet_endpoint":true,"primary_dfs_internet_host":true,"primary_dfs_microsoft_endpoint":true,"primary_dfs_microsoft_host":true,"primary_file_endpoint":true,"primary_file_host":true,"primary_file_internet_endpoint":true,"primary_file_internet_host":true,"primary_file_microsoft_endpoint":true,"primary_file_microsoft_host":true,"primary_location":true,"primary_queue_endpoint":true,"primary_queue_host":true,"primary_queue_microsoft_endpoint":true,"primary_queue_microsoft_host":true,"primary_table_endpoint":true,"primary_table_host":true,"primary_table_microsoft_endpoint":true,"primary_table_microsoft_host":true,"primary_web_endpoint":true,"primary_web_host":true,"primary_web_internet_endpoint":true,"primary_web_internet_host":true,"primary_web_microsoft_endpoint":true,"primary_web_microsoft_host":true,"queue_properties":true,"routing":true,"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_blob_endpoint":true,"secondary_blob_host":true,"secondary_blob_internet_endpoint":true,"secondary_blob_internet_host":true,"secondary_blob_microsoft_endpoint":true,"secondary_blob_microsoft_host":true,"secondary_connection_string":true,"secondary_dfs_endpoint":true,"secondary_dfs_host":true,"secondary_dfs_internet_endpoint":true,"secondary_dfs_internet_host":true,"secondary_dfs_microsoft_endpoint":true,"secondary_dfs_microsoft_host":true,"secondary_file_endpoint":true,"secondary_file_host":true,"secondary_file_internet_endpoint":true,"secondary_file_internet_host":true,"secondary_file_microsoft_endpoint":true,"secondary_file_microsoft_host":true,"secondary_location":true,"secondary_queue_endpoint":true,"secondary_queue_host":true,"secondary_queue_microsoft_endpoint":true,"secondary_queue_microsoft_host":true,"secondary_table_endpoint":true,"secondary_table_host":true,"secondary_table_microsoft_endpoint":true,"secondary_table_microsoft_host":true,"secondary_web_endpoint":true,"secondary_web_host":true,"secondary_web_internet_endpoint":true,"secondary_web_internet_host":true,"secondary_web_microsoft_endpoint":true,"secondary_web_microsoft_host":true,"share_properties":true,"static_website":true},"before_sensitive":false,"after_sensitive":{"azure_files_authentication":[],"blob_properties":[],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[],"primary_access_key":true,"primary_blob_connection_string":true,"primary_connection_string":true,"queue_properties":[],"routing":[],"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_connection_string":true,"share_properties":[],"static_website":[]},"after_identity":{"name":null,"resource_group_name":null,"subscription_id":null}}},{"address":"azurerm_storage_container.rawfiles","mode":"managed","type":"azurerm_storage_container","name":"rawfiles","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"container_access_type":"private","encryption_scope_override_enabled":true,"name":"rawfiles","storage_account_name":null,"timeouts":null},"after_unknown":{"default_encryption_scope":true,"has_immutability_policy":true,"has_legal_hold":true,"id":true,"metadata":true,"resource_manager_id":true,"storage_account_id":true},"before_sensitive":false,"after_sensitive":{"metadata":{}}}}],"output_changes":{"cognitive_search_endpoint_hint":{"actions":["create"],"before":null,"after":"https://rag-demo-search-svc.search.windows.net (use portal or az cli to get admin keys)","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cognitive_search_service_name":{"actions":["create"],"before":null,"after":"rag-demo-search-svc","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"key_vault_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"resource_group":{"actions":["create"],"before":null,"after":"rag-demo-rg","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"storage_account_name":{"actions":["create"],"before":null,"after":"ragtfstorageacct001","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"storage_container_name":{"actions":["create"],"before":null,"after":"rawfiles","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.2","values":{"outputs":{"cognitive_search_endpoint_hint":{"sensitive":false,"value":"https://rag-demo-search-svc.search.windows.net (use portal or az cli to get admin keys)","type":"string"},"cognitive_search_service_name":{"sensitive":false,"value":"rag-demo-search-svc","type":"string"},"resource_group":{"sensitive":false,"value":"rag-demo-rg","type":"string"},"storage_account_name":{"sensitive":false,"value":"ragtfstorageacct001","type":"string"},"storage_container_name":{"sensitive":false,"value":"rawfiles","type":"string"}},"root_module":{"resources":[{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9YzEzNWUxODYtZDUyYi00ZTEzLTkyMzktZmU2NGVhMjJmYTcyO3N1YnNjcmlwdGlvbklkPTU5ZDg0YzA4LTEwMjktNGM2YS1hYmNkLWM2MWE1ZGVlNGQyNTt0ZW5hbnRJZD1lODFkZDA5Ny0yOTdiLTQ4NzYtYWEwOC1iOTQ0OGRmNTRlZTA=","object_id":"c135e186-d52b-4e13-9239-fe64ea22fa72","subscription_id":"59d84c08-1029-4c6a-abcd-c61a5dee4d25","tenant_id":"e81dd097-297b-4876-aa08-b9448df54ee0","timeouts":null},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","version_constraint":"\u003e= 3.0.0","expressions":{"features":[{}],"subscription_id":{"constant_value":"59d84c08-1029-4c6a-abcd-c61a5dee4d25"}}}},"root_module":{"outputs":{"cognitive_search_endpoint_hint":{"expression":{"references":["azurerm_search_service.search.name","azurerm_search_service.search"]}},"cognitive_search_service_name":{"expression":{"references":["azurerm_search_service.search.name","azurerm_search_service.search"]}},"key_vault_id":{"expression":{"references":["azurerm_key_vault.kv.id","azurerm_key_vault.kv"]}},"resource_group":{"expression":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]}},"storage_account_name":{"expression":{"references":["azurerm_storage_account.sa.name","azurerm_storage_account.sa"]}},"storage_container_name":{"expression":{"references":["azurerm_storage_container.rawfiles.name","azurerm_storage_container.rawfiles"]}}},"resources":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"references":["var.key_vault_name"]},"network_acls":[{"bypass":{"constant_value":"AzureServices"},"default_action":{"constant_value":"Allow"}}],"purge_protection_enabled":{"constant_value":false},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]},"sku_name":{"constant_value":"standard"},"tenant_id":{"references":["data.azurerm_client_config.current.tenant_id","data.azurerm_client_config.current"]}},"schema_version":2},{"address":"azurerm_key_vault_secret.openai_key_placeholder","mode":"managed","type":"azurerm_key_vault_secret","name":"openai_key_placeholder","provider_config_key":"azurerm","expressions":{"key_vault_id":{"references":["azurerm_key_vault.kv.id","azurerm_key_vault.kv"]},"name":{"constant_value":"OPENAI-API-KEY"},"value":{"references":["var.openai_api_key","var.openai_api_key"]}},"schema_version":0},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_role_assignment.search_blob_reader","mode":"managed","type":"azurerm_role_assignment","name":"search_blob_reader","provider_config_key":"azurerm","expressions":{"principal_id":{"references":["azurerm_search_service.search.identity[0].principal_id","azurerm_search_service.search.identity[0]","azurerm_search_service.search.identity","azurerm_search_service.search"]},"role_definition_name":{"constant_value":"Storage Blob Data Reader"},"scope":{"references":["azurerm_storage_account.sa.id","azurerm_storage_account.sa"]}},"schema_version":0,"depends_on":["azurerm_search_service.search"]},{"address":"azurerm_search_service.search","mode":"managed","type":"azurerm_search_service","name":"search","provider_config_key":"azurerm","expressions":{"identity":[{"type":{"constant_value":"SystemAssigned"}}],"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"references":["var.search_service_name"]},"partition_count":{"references":["var.search_partition_count"]},"replica_count":{"references":["var.search_replica_count"]},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]},"sku":{"references":["var.search_sku"]}},"schema_version":0},{"address":"azurerm_storage_account.sa","mode":"managed","type":"azurerm_storage_account","name":"sa","provider_config_key":"azurerm","expressions":{"account_replication_type":{"constant_value":"LRS"},"account_tier":{"constant_value":"Standard"},"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"references":["var.storage_account_name"]},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]}},"schema_version":4},{"address":"azurerm_storage_container.rawfiles","mode":"managed","type":"azurerm_storage_container","name":"rawfiles","provider_config_key":"azurerm","expressions":{"container_access_type":{"constant_value":"private"},"name":{"references":["var.blob_container_name"]},"storage_account_id":{"references":["azurerm_storage_account.sa.id","azurerm_storage_account.sa"]}},"schema_version":1},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0}],"variables":{"blob_container_name":{"default":"rawfiles","description":"Blob container to hold raw files"},"key_vault_name":{"default":"ragdemo-kv-001","description":"Key Vault name (must be globally unique)"},"location":{"default":"eastus2","description":"Azure region"},"openai_api_key":{"default":"","description":"Optional: place OpenAI API key here for initial secret creation (or set later)","sensitive":true},"resource_group_name":{"default":"rag-demo-rg","description":"Resource group name"},"search_partition_count":{"default":1},"search_replica_count":{"default":1},"search_service_name":{"default":"rag-demo-search-svc","description":"Azure Cognitive Search service name (must be globally unique)"},"search_sku":{"default":"basic","description":"SKU for Azure Cognitive Search (basic, standard, etc.)"},"storage_account_name":{"default":"ragtfstorageacct001","description":"Storage account name (must be globally unique, lowercase)"}}}},"relevant_attributes":[{"resource":"azurerm_key_vault.kv","attribute":["id"]},{"resource":"azurerm_search_service.search","attribute":["identity",0,"principal_id"]},{"resource":"azurerm_storage_account.sa","attribute":["id"]},{"resource":"azurerm_search_service.search","attribute":["name"]},{"resource":"azurerm_storage_account.sa","attribute":["name"]},{"resource":"data.azurerm_client_config.current","attribute":["tenant_id"]},{"resource":"azurerm_storage_container.rawfiles","attribute":["name"]},{"resource":"azurerm_resource_group.rg","attribute":["location"]},{"resource":"azurerm_resource_group.rg","attribute":["name"]}],"timestamp":"2025-09-15T13:36:34Z","applyable":true,"complete":true,"errored":false}
